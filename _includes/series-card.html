{% comment %}
Displays a series as a unified card in the main blog feed
Parameters: series (object from series.yml data)
{% endcomment %}

<div class="article{% if include.class %} {{ include.class }}{% endif %}">
    <div class="article__inner">

        {% assign series_data = include.series %}
        {% if series_data.image %}
        <div class="article__head">
            <a class="article__image" href="{{ series_data.link | relative_url }}">
                <img class="lazy" data-src="{{ series_data.image | relative_url }}" alt="{{ series_data.title }}">
            </a>
        </div>
        {% endif %}

        <div class="article__content">

            <div class="article__tags">
                <span class="article__tag" style="background: #7c3aed;">
                    Series
                </span>
            </div>

            <h2 class="article__title">
                <a href="{{ series_data.link | relative_url }}">{{ series_data.title }}</a>
            </h2>

            <p class="article__excerpt">{{ series_data.description }}</p>

            <div class="article__meta">
                {% assign related_posts = site.posts | where: "series", series_data.slug %}
                {% assign most_recent = related_posts.first %}

                {% if most_recent %}
                <time class="article__date" datetime="{{ most_recent.date | date_to_xmlschema }}">
                    {% assign date_format = site.minima.date_format | default: "%d %-b, %Y" %}
                    {{ most_recent.date | date: date_format }}
                </time>
                {% endif %}

                <div class="article__minutes">
                    {{ related_posts.size }} {% if related_posts.size == 1 %}article{% else %}articles{% endif %}
                </div>
            </div>

        </div>
    </div>
</div>